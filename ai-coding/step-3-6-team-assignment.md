# mall电商系统 - 价格体系Bug修复 人员安排

## 文档信息

| 项目 | 内容 |
|------|------|
| **文档名称** | 价格体系Bug修复项目人员安排 |
| **文档版本** | v1.0 |
| **创建时间** | 2026-01-02 |
| **项目周期** | 25个工作日 (5周) |
| **关联文档** | [PRD修正版](./step-4-2-prd-corrected.md), [Roadmap](./step-4-5-roadmap.md) |

---

## 一、团队组成总览

### 1.1 团队人员配置

| 角色 | 姓名 | 投入时间 | 工作日 | 主要职责 | 关键技能 |
|------|------|---------|--------|---------|---------|
| **产品经理** | 产品张 | 20% | 5天 | 需求确认、优先级评审、产品验收 | 需求分析、业务理解 |
| **Tech Lead** | 技术李 | 30% | 7.5天 | 技术方案设计、代码审查、架构决策 | 架构设计、技术评审 |
| **后端开发A** | 开发王 | 100% | 25天 | 核心开发、单元测试、Bug修复 | Java、Spring Boot、MyBatis |
| **后端开发C** | 开发刘 | 100% (兼职参与) | 5天 | Redis缓存开发、技术支持 | Redis、缓存设计 |
| **QA测试** | 测试陈 | 80% | 20天 | 集成测试、性能测试、回归测试 | JMeter、自动化测试 |
| **安全工程师** | 安全赵 | 20% | 5天 | 安全测试、渗透测试、安全审计 | 安全测试、SonarQube |
| **DBA** | DBA孙 | 10% | 2.5天 | 索引评审、数据库优化、变更执行 | MySQL、索引优化 |
| **运维工程师** | 运维周 | 20% | 5天 | 环境部署、灰度发布、监控配置 | Docker、Jenkins、监控 |

### 1.2 人力资源甘特图

```
角色          Week 1    Week 2    Week 3    Week 4    Week 5
产品经理      ████░░    ░░░░░░    ░░░░░░    ░░░░░░    ░░░░░░  (20%)
Tech Lead     ████████  ██░░░░    ████░░    ██░░░░    ██░░░░  (30%)
开发A         ████████  ████████  ████████  ████████  ████████ (100%)
开发C         ░░░░░░    ░░░░░░    ░░░░██    ░░░░░░    ░░░░░░  (兼职)
测试B         ░░░░░░    ░░████    ░░░░░░    ████████  ████░░  (80%)
安全D         ░░░░░░    ░░░░░░    ░░░░░░    ░░░░████  ░░░░░░  (20%)
DBA           ░░░░░░    ░░░░░░    ░░░░░░    ██░░░░    ░░░░░░  (10%)
运维F         ░░██░░    ░░░░░░    ░░░░░░    ░░░░░░    ░░░░██  (20%)

图例: ████ = 工作时间  ░░ = 非工作时间
```

### 1.3 人力成本估算

| 角色 | 日均成本 | 投入天数 | 总成本 | 占比 |
|------|---------|---------|--------|-----|
| 产品经理 | ¥1,200 | 5天 | ¥6,000 | 5.7% |
| Tech Lead | ¥2,000 | 7.5天 | ¥15,000 | 14.2% |
| 后端开发A | ¥1,500 | 25天 | ¥37,500 | 35.5% |
| 后端开发C | ¥1,500 | 5天 | ¥7,500 | 7.1% |
| QA测试 | ¥1,000 | 20天 | ¥20,000 | 18.9% |
| 安全工程师 | ¥1,800 | 5天 | ¥9,000 | 8.5% |
| DBA | ¥1,800 | 2.5天 | ¥4,500 | 4.3% |
| 运维工程师 | ¥1,200 | 5天 | ¥6,000 | 5.7% |
| **总计** | - | **75天人力** | **¥105,500** | **100%** |

---

## 二、分角色详细工作安排

### 👤 产品经理 (产品张)

**投入时间**: 20% (约5个工作日)

#### 工作内容

| 阶段 | 时间 | 任务 | 产出 | 优先级 |
|------|------|------|------|-------|
| **需求评审** | Day 1 (4h) | 主持需求评审会议<br>确认15个Bug的优先级<br>决策价格快照是否实施 | 评审纪要<br>需求确认单 | P0 |
| **过程跟进** | Week 2-5 (2h/周) | 参加每周例会<br>解答需求疑问<br>协调资源 | 会议纪要 | P1 |
| **产品验收** | Day 30 (4h) | 抽查关键场景<br>确认功能符合预期<br>签字验收 | 验收报告 | P0 |

#### 关键决策点

1. **Day 1**: 确认价格快照是否实施 (建议: 暂不实施,单独立项)
2. **Day 10**: P0级验收 (4个严重Bug)
3. **Day 22**: P1级验收 (6个高危问题)
4. **Day 30**: 最终产品验收

#### 联系方式

- **邮箱**: product.zhang@mall.com
- **钉钉**: @产品张
- **电话**: 139-XXXX-XXXX

---

### 👤 Tech Lead (技术李)

**投入时间**: 30% (约7.5个工作日)

#### 工作内容

| 阶段 | 时间 | 任务 | 产出 | 优先级 |
|------|------|------|------|-------|
| **技术方案设计** | Day 1-2 (1.5天) | 设计P0级Bug修复方案<br>设计BigDecimal精度方案<br>设计Map性能优化方案 | 技术设计文档 | P0 |
| **设计评审** | Day 2 (2h) | 主持技术方案评审会议<br>确认技术可行性 | 评审纪要 | P0 |
| **代码审查(P0)** | Day 6-7 (1天) | 审查P0级代码<br>确认单元测试覆盖率<br>提出修改意见 | 代码审查报告 | P0 |
| **价格验证设计** | Day 12 (1天) | 设计服务端价格验证方案<br>设计Redis缓存策略<br>设计并发处理策略 | 设计方案 | P1 |
| **代码审查(P1)** | Day 17 (1天) | 审查P1级代码<br>确认性能优化效果<br>审查安全加固 | 代码审查报告 | P1 |
| **技术支持** | Week 1-5 (1天) | 解答技术问题<br>协调技术资源<br>参加每周例会 | 技术支持记录 | P1 |
| **团队培训** | Day 25 (0.5天) | 编写培训材料<br>讲解技术方案<br>答疑解惑 | 培训材料 | P2 |

#### 关键技术决策

| 决策点 | 时间 | 决策内容 | 理由 |
|-------|------|---------|------|
| **空指针处理策略** | Day 1 | 统一使用Optional或null检查 | 代码一致性 |
| **BigDecimal精度** | Day 1 | 使用"最后补齐差额"算法 | 确保100%准确 |
| **Map优化方案** | Day 1 | `Map<Long, PromotionProduct>` | O(N×M) → O(N+M) |
| **Redis缓存过期时间** | Day 12 | 设置为5分钟 | 平衡性能与一致性 |
| **唯一索引设计** | Day 12 | `UNIQUE(member_id, product_id, sku_id)` | 防止重复数据 |

#### 联系方式

- **邮箱**: techlead.li@mall.com
- **钉钉**: @技术李
- **电话**: 138-XXXX-XXXX

---

### 👤 后端开发A (开发王) - 核心开发

**投入时间**: 100% (25个工作日)

#### 第1-2周: P0级严重Bug修复

| 时间 | 任务 | 文件 | 代码行数 | 单元测试 |
|------|------|------|---------|---------|
| **Day 2-3** | 空指针异常修复 | OmsPromotionServiceImpl.java | ~50行 | 6个测试用例 |
| **Day 3-4** | 满减除零异常修复 | OmsPromotionServiceImpl.java | ~20行 | 4个测试用例 |
| **Day 4-5** | 优惠金额分摊精度修复 | OmsPromotionServiceImpl.java | ~60行 | 8个测试用例 |
| **Day 6** | realStock默认值修复 | OmsPromotionServiceImpl.java | ~10行 | 3个测试用例 |
| **Day 7** | 代码修改 (审查意见) | 全部文件 | ~20行 | 修改测试 |
| **Day 10** | Bug修复 (测试反馈) | 全部文件 | ~10行 | 回归测试 |

**小计**: 
- 代码修改: ~170行
- 单元测试: ~21个用例
- 测试覆盖率目标: > 60%

---

#### 第3-4周: P1级高危问题修复

| 时间 | 任务 | 文件 | 代码行数 | 单元测试 |
|------|------|------|---------|---------|
| **Day 11上午** | 满减规则精度修复 | OmsPromotionServiceImpl.java | ~15行 | 3个测试用例 |
| **Day 11下午** | 阶梯排序修复 | OmsPromotionServiceImpl.java | ~10行 | 2个测试用例 |
| **Day 13-14** | 购物车价格验证 | OmsCartItemServiceImpl.java | ~80行 | 10个测试用例 |
| **Day 15下午** | Map性能优化 | OmsPromotionServiceImpl.java | ~30行 | 5个测试用例 |
| **Day 22** | Bug修复 (性能/安全反馈) | 全部文件 | ~20行 | 回归测试 |

**小计**:
- 代码修改: ~155行
- 单元测试: ~20个用例

---

#### 第5周: P2级优化与上线准备

| 时间 | 任务 | 文件 | 代码行数 | 单元测试 |
|------|------|------|---------|---------|
| **Day 23上午** | 库存计算修复 + IN查询限制 | OmsPromotionServiceImpl.java<br>OmsCartItemController.java | ~25行 | 4个测试用例 |
| **Day 23下午** | 排序优化 + 对象创建优化 | PortalProductDao.xml<br>OmsPromotionServiceImpl.java | ~20行 | 2个测试用例 |
| **Day 25上午** | 技术文档更新 | - | - | - |
| **Day 26-30** | 灰度发布支持 (on-call) | - | - | - |

**小计**:
- 代码修改: ~45行
- 单元测试: ~6个用例

---

#### 总工作量统计

| 阶段 | 代码修改 | 单元测试 | 文档 | Bug修复 | 总工时 |
|------|---------|---------|------|---------|--------|
| P0级 | ~170行 | ~21个用例 | 设计文档 | ~30行 | 10天 |
| P1级 | ~155行 | ~20个用例 | 技术方案 | ~20行 | 12天 |
| P2级 | ~45行 | ~6个用例 | 技术文档 | - | 3天 |
| **总计** | **~370行** | **~47个用例** | **3份文档** | **~50行** | **25天** |

#### 关键产出

1. **代码文件**: 
   - OmsPromotionServiceImpl.java (修改~300行)
   - OmsCartItemServiceImpl.java (修改~80行)
   - OmsCartItemController.java (修改~25行)
   - PortalProductDao.xml (修改~20行)

2. **单元测试**: 
   - ~47个测试用例
   - 覆盖率目标: > 60%

3. **技术文档**:
   - P0级技术方案
   - P1级价格验证方案
   - P2级优化说明

#### 联系方式

- **邮箱**: developer.wang@mall.com
- **钉钉**: @开发王
- **电话**: 137-XXXX-XXXX

---

### 👤 后端开发C (开发刘) - Redis缓存

**投入时间**: 兼职参与 (约5个工作日)

#### 工作内容

| 时间 | 任务 | 产出 | 优先级 |
|------|------|------|-------|
| **Day 15** (1天) | Redis缓存开发<br>商品信息缓存(5分钟)<br>促销规则缓存<br>缓存一致性处理 | 缓存逻辑代码<br>单元测试 | P1 |
| **Week 3-4** (兼职) | 技术支持<br>解答Redis问题<br>性能调优建议 | 技术支持记录 | P1 |

#### 关键技术点

1. **商品信息缓存**:
```java
// 缓存Key设计
String cacheKey = "product:info:" + productId;
// 过期时间: 5分钟
redisService.set(cacheKey, productInfo, 300);
```

2. **缓存更新策略**:
   - 商品更新时主动清除缓存
   - 缓存未命中时查询数据库并写入缓存

3. **缓存一致性**:
   - 使用Redis事务确保一致性
   - 设置合理的过期时间(5分钟)

#### 联系方式

- **邮箱**: developer.liu@mall.com
- **钉钉**: @开发刘
- **电话**: 136-XXXX-XXXX

---

### 👤 QA测试 (测试陈)

**投入时间**: 80% (约20个工作日)

#### 测试计划

| 阶段 | 时间 | 测试内容 | 测试用例数 | 产出 |
|------|------|---------|----------|------|
| **P0级集成测试** | Day 8-9 (2天) | 4个P0级Bug测试<br>回归测试<br>性能基准测试 | ~30个用例 | 测试报告 |
| **P1级性能测试** | Day 18-19 (2天) | 购物车查询性能<br>促销计算性能<br>并发测试 | ~20个用例 | 性能报告 |
| **P2级回归测试** | Day 24-25 (2天) | 完整功能测试<br>性能回归测试<br>兼容性测试 | ~50个用例 | 回归测试报告 |
| **测试环境准备** | Day 2, Week 2-5 | 搭建测试环境<br>准备测试数据<br>配置监控 | - | 测试环境 |
| **日常测试支持** | Week 2-5 (兼职) | Bug验证<br>冒烟测试<br>测试咨询 | - | 测试记录 |

---

#### P0级集成测试 (Day 8-9)

**测试用例清单**:

| 测试项 | 用例数 | 测试方法 | 预期结果 |
|-------|-------|---------|---------|
| 空指针异常 | 6个 | 单元测试 + 集成测试 | 无NullPointerException |
| 除零异常 | 4个 | 边界值测试 | 无ArithmeticException |
| 精度问题 | 8个 | 财务对账测试 | 100%准确 |
| realStock | 4个 | 前端展示测试 | 无null值 |
| 回归测试 | 8个 | 功能测试 | 无功能回归 |

**性能基准测试**:

| 指标 | 测试方法 | 基准值 | 备注 |
|------|---------|--------|------|
| 购物车查询(10商品) | JMeter 100并发 | ~100ms | 记录基准 |
| 购物车查询(50商品) | JMeter 100并发 | ~800ms | 记录基准 |
| 购物车添加 | JMeter 50并发 | ~150ms | 记录基准 |

---

#### P1级性能测试 (Day 18-19)

**性能测试目标**:

| 指标 | 基准值 | 目标值 | 测试方法 | 负载 |
|------|-------|--------|---------|------|
| 购物车查询(10商品) | ~100ms | < 200ms (95th) | JMeter | 1000并发 |
| 购物车查询(50商品) | ~800ms | < 500ms (95th) | JMeter | 1000并发 |
| 购物车查询(100商品) | ~2000ms | < 500ms (95th) | JMeter | 1000并发 |
| 购物车添加 | ~150ms | < 200ms (95th) | JMeter | 500并发 |
| QPS | ~500 | > 1000 | JMeter压力测试 | 持续1小时 |
| CPU使用率 | 未知 | < 70% | 监控系统 | 峰值时段 |
| 内存使用率 | 未知 | < 70% | 监控系统 | 峰值时段 |
| 数据库慢查询 | 未知 | 0条 | Slow Query Log | 持续1小时 |

**并发测试场景**:

| 场景 | 并发数 | 持续时间 | 预期结果 |
|------|-------|---------|---------|
| 同时查询购物车 | 1000 | 10分钟 | 响应时间 < 500ms |
| 同时添加购物车 | 500 | 10分钟 | 响应时间 < 200ms |
| 并发添加相同商品 | 100 | 5分钟 | 数据正确,无重复 |

---

#### P2级回归测试 (Day 24-25)

**回归测试清单**:

| 测试模块 | 用例数 | 测试方法 | 预期结果 |
|---------|-------|---------|---------|
| 购物车查询 | 15个 | 功能测试 | 全部通过 |
| 购物车添加 | 10个 | 功能测试 | 全部通过 |
| 购物车修改 | 8个 | 功能测试 | 全部通过 |
| 购物车删除 | 5个 | 功能测试 | 全部通过 |
| 促销计算 | 12个 | 功能测试 | 全部通过 |
| 性能回归 | 8个 | 性能测试 | 无性能下降 |
| 兼容性测试 | 5个 | API测试 | 前端无异常 |

---

#### 测试工具与环境

**测试工具**:
- JMeter 5.5 (性能测试)
- Postman (API测试)
- JUnit 5 (单元测试)
- Selenium (自动化测试,如需)

**测试环境**:
- 应用服务器: 4C8G × 2台
- MySQL 5.7: 4C8G × 1台 (主从)
- Redis 7.0: 2C4G × 1台
- 监控系统: Grafana + Prometheus

#### 联系方式

- **邮箱**: qa.chen@mall.com
- **钉钉**: @测试陈
- **电话**: 135-XXXX-XXXX

---

### 👤 安全工程师 (安全赵)

**投入时间**: 20% (约5个工作日)

#### 安全测试计划

| 时间 | 测试内容 | 测试方法 | 预期结果 |
|------|---------|---------|---------|
| **Day 20-21** (2天) | **安全测试** | | |
| | 价格篡改测试 | 手动测试 | 无法篡改价格 |
| | SQL注入测试 | SQLMap扫描 | 无SQL注入漏洞 |
| | XSS攻击测试 | 手动测试 | 无XSS漏洞 |
| | 越权访问测试 | 手动测试 | 无越权问题 |
| | 代码扫描 | SonarQube | 无Critical问题 |
| **Day 23** (1天) | **复测** | | |
| | Bug修复验证 | 手动测试 | 安全问题全部修复 |
| **Day 30** (1天) | **最终审计** | | |
| | 渗透测试 | 第三方工具 | 通过安全审计 |

---

#### 价格篡改测试用例

| 测试场景 | 篡改方式 | 预期结果 | 实际结果 |
|---------|---------|---------|---------|
| 添加购物车 | 客户端传入0.01元 | 实际保存真实价格 | ⏳ 待测试 |
| 添加购物车 | 客户端传入9999.99元 | 实际保存真实价格 | ⏳ 待测试 |
| 添加购物车 | 客户端传入负数价格 | 返回错误提示 | ⏳ 待测试 |
| 修改商品名称 | 客户端传入恶意名称 | 实际保存真实名称 | ⏳ 待测试 |
| 修改商品图片 | 客户端传入恶意URL | 实际保存真实图片 | ⏳ 待测试 |

---

#### SonarQube代码扫描指标

| 指标 | 当前值 | 目标值 | 备注 |
|------|-------|--------|------|
| Critical问题 | 未知 | 0个 | 必须全部修复 |
| Major问题 | 未知 | < 5个 | 优先修复 |
| 代码重复率 | 未知 | < 5% | 可接受 |
| 代码覆盖率 | 未知 | > 60% | 单元测试覆盖 |

#### 联系方式

- **邮箱**: security.zhao@mall.com
- **钉钉**: @安全赵
- **电话**: 134-XXXX-XXXX

---

### 👤 DBA (DBA孙)

**投入时间**: 10% (约2.5个工作日)

#### 数据库优化计划

| 时间 | 任务 | 产出 | 风险 |
|------|------|------|------|
| **Day 16上午** (0.5天) | 索引方案评审<br>评估索引对写入性能的影响<br>评估磁盘空间占用 | 评审意见<br>变更方案 | 低 |
| **Day 16下午** (0.5天) | 添加索引 (业务低峰期)<br>使用pt-online-schema-change<br>监控变更过程 | 索引脚本<br>变更日志 | 中 |
| **Day 17-25** (1天) | 性能监控<br>监控慢查询日志<br>监控主从延迟<br>优化建议 | 监控报告 | 低 |
| **Day 26-30** (0.5天) | 上线支持 (on-call)<br>监控数据库性能<br>应急处理 | 监控记录 | 中 |

---

#### 索引变更清单

| 表名 | 索引字段 | 索引类型 | 预计大小 | 变更工具 |
|------|---------|---------|---------|---------|
| pms_sku_stock | product_id | BTREE | ~20MB | pt-online-schema-change |
| pms_product_ladder | product_id | BTREE | ~5MB | pt-online-schema-change |
| pms_product_full_reduction | product_id | BTREE | ~5MB | pt-online-schema-change |

**索引DDL**:
```sql
-- pms_sku_stock
ALTER TABLE pms_sku_stock ADD INDEX idx_product_id (product_id);

-- pms_product_ladder
ALTER TABLE pms_product_ladder ADD INDEX idx_product_id (product_id);

-- pms_product_full_reduction
ALTER TABLE pms_product_full_reduction ADD INDEX idx_product_id (product_id);
```

**回滚脚本**:
```sql
ALTER TABLE pms_sku_stock DROP INDEX idx_product_id;
ALTER TABLE pms_product_ladder DROP INDEX idx_product_id;
ALTER TABLE pms_product_full_reduction DROP INDEX idx_product_id;
```

---

#### 索引变更执行计划

**执行时间**: 2026-01-27 (周一) 14:00-16:00 (业务低峰期)

**执行步骤**:
1. **14:00-14:10**: 备份数据库 (全量备份)
2. **14:10-14:30**: 执行`pms_sku_stock`索引添加
3. **14:30-14:50**: 执行`pms_product_ladder`索引添加
4. **14:50-15:10**: 执行`pms_product_full_reduction`索引添加
5. **15:10-15:30**: 验证索引 (EXPLAIN分析)
6. **15:30-16:00**: 监控写入性能

**风险应对**:
- 锁表风险: 使用pt-online-schema-change,避免锁表
- 磁盘空间: 预留100MB空间 (当前剩余5GB)
- 写入性能: 实时监控,如下降>10%则回滚

---

#### 性能监控指标

| 指标 | 监控频率 | 告警阈值 | 负责人 |
|------|---------|---------|--------|
| 慢查询数量 | 实时 | > 10条/分钟 | DBA孙 |
| 主从延迟 | 1分钟 | > 5秒 | DBA孙 |
| 连接数 | 1分钟 | > 80% | DBA孙 |
| 磁盘IO | 1分钟 | > 80% | DBA孙 |

#### 联系方式

- **邮箱**: dba.sun@mall.com
- **钉钉**: @DBA孙
- **电话**: 133-XXXX-XXXX

---

### 👤 运维工程师 (运维周)

**投入时间**: 20% (约5个工作日)

#### 运维支持计划

| 时间 | 任务 | 产出 | 优先级 |
|------|------|------|-------|
| **Day 2** (0.5天) | 搭建测试环境<br>配置应用服务器<br>配置数据库<br>配置Redis | 测试环境 | P0 |
| **Day 25** (1天) | 灰度发布方案设计<br>监控配置<br>告警规则配置 | 灰度方案<br>监控大盘 | P0 |
| **Day 26-30** (3.5天) | 灰度发布执行<br>监控观察<br>应急处理 | 生产环境<br>监控报告 | P0 |

---

#### 测试环境配置 (Day 2)

**服务器配置**:

| 服务 | 配置 | 数量 | 用途 |
|------|-----|-----|------|
| 应用服务器 | 4C8G | 2台 | mall-portal应用 |
| MySQL | 4C8G | 1台 | 数据库 (主从) |
| Redis | 2C4G | 1台 | 缓存 |
| Nginx | 2C4G | 1台 | 负载均衡 |

**部署脚本**:
```bash
# 应用部署
docker-compose -f docker-compose-test.yml up -d

# 数据库初始化
mysql -h test-db -u root -p < mall.sql

# Redis启动
docker run -d --name redis -p 6379:6379 redis:7.0
```

---

#### 灰度发布方案 (Day 25)

**灰度策略**: 5% → 20% → 50% → 100%

| 阶段 | 流量比例 | 观察期 | 回滚条件 |
|------|---------|--------|---------|
| **灰度第一步** | 5% | 2天 | 异常率 > 0.1% 或 响应时间 > 500ms |
| **灰度第二步** | 20% | 1天 | 异常率 > 0.1% 或 响应时间 > 500ms |
| **灰度第三步** | 50% | 1天 | 异常率 > 0.1% 或 响应时间 > 500ms |
| **全量上线** | 100% | 持续监控 | 异常率 > 0.1% 或 响应时间 > 500ms |

**流量切换配置 (Nginx)**:
```nginx
upstream mall-portal {
    # 灰度服务器 (新版本)
    server 10.0.1.100:8080 weight=5;   # 5%流量
    # 稳定服务器 (旧版本)
    server 10.0.1.101:8080 weight=95;  # 95%流量
}
```

---

#### 监控配置 (Day 25)

**监控指标**:

| 指标 | 监控工具 | 告警阈值 | 告警方式 |
|------|---------|---------|---------|
| 异常告警数量 | Grafana | > 10个/小时 | 钉钉 + 短信 |
| 响应时间 (95th) | Grafana | > 500ms | 钉钉 |
| QPS | Grafana | < 500 (下降50%) | 钉钉 |
| 错误率 | Grafana | > 0.1% | 钉钉 + 短信 |
| CPU使用率 | Grafana | > 70% | 钉钉 |
| 内存使用率 | Grafana | > 70% | 钉钉 |
| 数据库慢查询 | MySQL | > 10条/分钟 | 钉钉 |

**Grafana监控大盘**:
- 应用性能监控 (APM)
- 数据库性能监控 (DB Performance)
- 缓存性能监控 (Redis Performance)
- 业务指标监控 (Business Metrics)

---

#### 灰度发布执行 (Day 26-30)

**Day 26 (灰度5%)**:
- 09:00: 部署新版本到灰度服务器
- 10:00: 切换5%流量
- 10:00-18:00: 实时监控 (每小时查看一次)
- 18:00: 评估是否继续

**Day 27 (观察)**:
- 全天监控
- 收集用户反馈
- 准备下一步灰度

**Day 28 (灰度20%)**:
- 09:00: 切换20%流量
- 全天监控

**Day 29 (灰度50%)**:
- 09:00: 切换50%流量
- 全天监控

**Day 30 (全量上线)**:
- 09:00: 上线评审会议
- 10:00: 切换100%流量
- 10:00-18:00: 持续监控 (每30分钟查看一次)
- 18:00: 确认上线成功

---

#### 应急预案

| 场景 | 判断条件 | 处理措施 | 负责人 |
|------|---------|---------|--------|
| **异常率过高** | > 0.1% | 立即回滚到上一版本 | 运维周 |
| **响应时间过长** | > 1000ms | 检查日志,必要时回滚 | 运维周 + 开发王 |
| **数据库锁表** | 大量慢查询 | 联系DBA紧急处理 | DBA孙 |
| **Redis宕机** | 缓存不可用 | 重启Redis,降级为直连数据库 | 运维周 |
| **服务器宕机** | 服务不可用 | 切换到备用服务器 | 运维周 |

#### 联系方式

- **邮箱**: devops.zhou@mall.com
- **钉钉**: @运维周
- **电话**: 132-XXXX-XXXX

---

## 三、协作与沟通

### 3.1 会议安排

| 会议名称 | 频率 | 时间 | 参与人 | 主持人 |
|---------|------|------|-------|--------|
| **需求评审会议** | 1次 (Day 1) | 09:00-10:00 | 全员 | 产品张 |
| **技术方案评审会议** | 1次 (Day 2) | 09:00-11:00 | 技术团队 | 技术李 |
| **每日站会** | 每天 | 09:30-09:45 | 全员 | 技术李 |
| **每周例会** | 每周五 | 16:00-17:00 | 全员 | 产品张 |
| **里程碑评审** | 3次 (Day 10, 22, 30) | 下午 | 全员 | 产品张 |
| **上线评审会议** | 1次 (Day 30) | 09:00-10:00 | 全员 | 产品张 |

### 3.2 沟通渠道

| 渠道 | 用途 | 响应时间 |
|------|------|---------|
| **钉钉群** | 日常沟通、问题咨询 | 30分钟内 |
| **邮件** | 正式通知、文档分享 | 4小时内 |
| **电话/短信** | 紧急问题 | 立即响应 |
| **JIRA** | 任务管理、Bug跟踪 | 每日查看 |

### 3.3 协作流程

```
需求确认 → 技术设计 → 代码开发 → 代码审查 → 测试 → 上线
   ↓          ↓          ↓          ↓        ↓      ↓
产品张     技术李     开发王     技术李    测试陈  运维周
```

---

## 四、人员备份与应急

### 4.1 关键角色备份

| 主要角色 | 备份人员 | 备份能力 | 触发条件 |
|---------|---------|---------|---------|
| Tech Lead (技术李) | 开发王 | 80% | 技术李请假或紧急情况 |
| 开发A (开发王) | 开发刘 | 70% | 开发王请假或紧急情况 |
| 测试B (测试陈) | 外部QA | 100% | 测试陈请假或工作量过大 |
| 运维F (运维周) | 外部运维 | 100% | 运维周请假或紧急情况 |

### 4.2 人力不足应对

| 场景 | 应对措施 | 负责人 |
|------|---------|--------|
| **开发资源不足** | 1. 调整优先级,P2级延后<br>2. 申请外部支援 | 技术李 |
| **测试资源不足** | 1. 开发协助测试<br>2. 申请外部QA | 测试陈 |
| **关键人员请假** | 1. 启用备份人员<br>2. 调整项目计划 | 产品张 |
| **多人同时请假** | 1. 暂停项目<br>2. 重新评估计划 | 产品张 |

---

## 五、绩效考核

### 5.1 团队目标

| 目标 | 权重 | 评价标准 |
|------|-----|---------|
| **按时交付** | 30% | Day 30完成全量上线 |
| **质量达标** | 30% | 无P0/P1级遗留Bug |
| **性能达标** | 20% | 响应时间 < 500ms, QPS > 1000 |
| **安全达标** | 20% | 通过安全审计,无高危漏洞 |

### 5.2 个人考核

| 角色 | 考核指标 | 权重 |
|------|---------|-----|
| **产品经理** | 需求清晰度、验收及时性 | 100% |
| **Tech Lead** | 技术方案质量、代码审查质量 | 100% |
| **开发A** | 代码质量、单元测试覆盖率、Bug修复及时性 | 100% |
| **开发C** | 缓存功能质量、技术支持响应 | 100% |
| **测试B** | 测试覆盖率、Bug发现率、测试及时性 | 100% |
| **安全D** | 安全问题发现率、安全测试完整性 | 100% |
| **DBA** | 索引优化效果、数据库稳定性 | 100% |
| **运维F** | 灰度发布成功率、监控及时性 | 100% |

---

## 六、版本信息

| 项目 | 内容 |
|------|------|
| **文档版本** | v1.0 |
| **创建时间** | 2026-01-02 |
| **创建人员** | 产品 + 技术团队 |
| **最后更新** | 2026-01-02 |
| **文档状态** | ✅ 待评审 |

---

## 附录: 快速联系表

| 姓名 | 角色 | 钉钉 | 电话 | 邮箱 |
|------|------|------|------|------|
| 产品张 | 产品经理 | @产品张 | 139-XXXX-XXXX | product.zhang@mall.com |
| 技术李 | Tech Lead | @技术李 | 138-XXXX-XXXX | techlead.li@mall.com |
| 开发王 | 后端开发A | @开发王 | 137-XXXX-XXXX | developer.wang@mall.com |
| 开发刘 | 后端开发C | @开发刘 | 136-XXXX-XXXX | developer.liu@mall.com |
| 测试陈 | QA测试 | @测试陈 | 135-XXXX-XXXX | qa.chen@mall.com |
| 安全赵 | 安全工程师 | @安全赵 | 134-XXXX-XXXX | security.zhao@mall.com |
| DBA孙 | DBA | @DBA孙 | 133-XXXX-XXXX | dba.sun@mall.com |
| 运维周 | 运维工程师 | @运维周 | 132-XXXX-XXXX | devops.zhou@mall.com |

---

**文档创建**: 2026-01-02  
**审批状态**: ✅ 待评审  
**下次更新**: 项目启动后每周更新
